using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Invulnerability : MonoBehaviour
{
    public PlayerHP Playerhealth;
    [SerializeField] private float iFramesDuration;
    [SerializeField] private int numberofFlashes;
    private SpriteRenderer spritRend;
    // Start is called before the first frame update
    void Start()
    {
        spritRend = GetComponent<SpriteRenderer>();

    }

    private void OnCollisionEnter2D(Collision2D collision)
    {
        if (collision.gameObject.tag == "Player")
        {
            StartCoroutine(IFrame());
        }

        IEnumerator IFrame()
        {
            Physics2D.IgnoreLayerCollision(7, 8, true);
            for (int i = 0; i < numberofFlashes; i++)
            {
                spritRend.color = new Color(1, 0, 0, 0.5f);
                yield return new WaitForSeconds(iFramesDuration / (numberofFlashes * 2));
                spritRend.color = Color.white;
                yield return new WaitForSeconds(iFramesDuration / (numberofFlashes * 2));
            }
            Physics2D.IgnoreLayerCollision(7, 8, true);
        }
    }
}